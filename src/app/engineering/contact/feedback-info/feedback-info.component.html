<section class="content">
  <div class="content-block">
    <div class="block-header">
      <!-- breadcrumb -->
      <app-breadcrumb [title]="breadscrums[0].title" [items]="breadscrums[0].items" [active_item]="breadscrums[0].active">
      </app-breadcrumb>
    </div>

    <div class="card">
      <div class="card-header">
        <h2>Feedback List</h2>
        <input matInput placeholder="Search by name or email" [(ngModel)]="searchTerm" class="form-control w-25 float-right" />
      </div>
      <div class="card-body table-responsive">
        <table class="table table-bordered table-hover">
          <thead>
            <tr>
              <th>#</th>
              <th>Name</th>
              <th>Email</th>
              <th>Category</th>
              <th>Rating</th>
              <th>Date</th>
              <th>Status</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let feedback of filteredFeedbacks(); let i = index">
              <td>{{ i + 1 }}</td>
              <td>{{ feedback.name }}</td>
              <td>{{ feedback.email }}</td>
              <td>{{ feedback.category }}</td>
              <td>{{ feedback.rating }}</td>
              <td>{{ feedback.date | date }}</td>
              <td>
                <span class="badge" [ngClass]="{
                  'bg-warning': feedback.status === 'Pending',
                  'bg-success': feedback.status === 'Resolved',
                  'bg-info': feedback.status === 'Reviewed'
                }">{{ feedback.status }}</span>
              </td>
              <td>
                <button mat-icon-button (click)="viewFeedback(feedback)"><mat-icon>visibility</mat-icon></button>
                <button mat-icon-button color="primary" (click)="markAsReviewed(feedback)"><mat-icon>check</mat-icon></button>
                <button mat-icon-button color="warn" (click)="deleteFeedback(feedback._id)"><mat-icon>delete</mat-icon></button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</section>
